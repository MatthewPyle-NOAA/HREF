<?xml version="1.0"?>
<!DOCTYPE workflow
[

<!ENTITY STARTYEAR "2019">
<!ENTITY STARTMONTH "06">
<!ENTITY STARTDAY "19">
<!ENTITY STARTHOUR "00">

<!ENTITY ENDYEAR "2020">
<!ENTITY ENDMONTH "12">
<!ENTITY ENDDAY "31">
<!ENTITY ENDHOUR "12">

<!ENTITY USER "Matthew.Pyle">
<!ENTITY ACCOUNT "HREF-T2O">

<!ENTITY HOMEhref "/gpfs/hps3/emc/meso/noscrub/Matthew.Pyle/HREF_fork/href.v3.0.0">
<!ENTITY domain "ak">
<!ENTITY machine "WCOSS_C">
<!ENTITY envir "test">
<!ENTITY JOBS "&HOMEhref;/jobs">
<!ENTITY SCRIPTS "&HOMEhref;/scripts">
<!ENTITY COMINfv3sar "/gpfs/tp2/ptmp/Benjamin.Blake/com/fv3cam/para/fv3sar">
<!ENTITY COMINfv3sarnc "/gpfs/hps2/ptmp/Matthew.Pyle/com/hiresw/para/hiresw">
<!ENTITY COMINhrrr "/gpfs/hps2/ptmp/Ming.Hu/com/hrrr/prod/hrrr"> 
<!-- <!ENTITY COMINhrrr "/gpfs/hps/ptmp/Benjamin.Blake/com/hrrr/prod/hrrr"> -->
<!-- <!ENTITY COMINhrrr "/gpfs/hps/nco/ops/com/hrrr/prod/hrrr">  -->
<!ENTITY COMINhiresw "/gpfs/hps/nco/ops/com/hiresw/prod/hiresw">
<!ENTITY COMINnam "/gpfs/dell1/nco/ops/com/nam/prod/nam">
<!ENTITY COMINall "/gpfs/hps2/ptmp/Matthew.Pyle/nwges/&envir;/hiresw/href">
<!ENTITY GESROOT "/gpfs/hps2/ptmp/Matthew.Pyle/nwges">
<!ENTITY OUTDIR "/gpfs/hps2/ptmp/&USER;">
<!ENTITY MYCOMROOT "/gpfs/hps2/ptmp/&USER;/com">
<!ENTITY MYCOMROOTPERM "/gpfs/hps3/emc/meso/noscrub/&USER;/com">
<!ENTITY DATAROOT "/gpfs/hps2/stmp/&USER;/tmpnwprd">
<!ENTITY KEEPDATA "NO">

<!ENTITY RESERVATION '<queue>devhigh</queue><account>&ACCOUNT;</account>'>
<!ENTITY RESERVATION_TRANSFER '<queue>dev_transfer</queue><account>&ACCOUNT;</account>'>

<!ENTITY CLEANUP_RESOURCES '<walltime>00:10:00</walltime>'>
<!ENTITY PREPROC_RESOURCES '<walltime>00:25:00</walltime><native></native>'>
<!ENTITY FFG_RESOURCES '<walltime>00:10:00</walltime><native></native>'>
<!ENTITY EAS_RESOURCES '<walltime>00:25:00</walltime><native></native>'>
<!ENTITY ENSPROD_RESOURCES '<walltime>00:25:00</walltime><native></native>'>
<!ENTITY GEMPAK_RESOURCES '<walltime>00:50:00</walltime><native></native>'>
<!ENTITY TIMEOFFSET_SIX "-00:06:00:00">
<!ENTITY TIMEOFFSET_TWELVE "-00:12:00:00">


]>


<!--  ************************************************************* -->
<!--  ******************* STARTING THE WORKFLOW ******************* -->

<!-- <workflow realtime="F" scheduler="lsfcray" taskthrottle="11"> -->
<workflow realtime="T" scheduler="lsfcray" taskthrottle="60" cyclethrottle="12" cyclelifespan="00:36:30:00">

  <cycledef group="regional">&STARTYEAR;&STARTMONTH;&STARTDAY;&STARTHOUR;00 &ENDYEAR;&ENDMONTH;&ENDDAY;&ENDHOUR;00 12:00:00</cycledef>

  <log>
    <cyclestr>&OUTDIR;/logfiles_href/workflow_regional_&domain;_@Y@m@d@H.log</cyclestr>
  </log>


<!--  ************************************************************* -->


 <task name="preproc_hrrr" cycledefs="regional" maxtries="3">
  &RESERVATION;
  &PREPROC_RESOURCES;
  <nodes>7:ppn=7</nodes>
    <command>&JOBS;/launch.ksh &JOBS;/JHREF_PREPROC_HRRR</command>
    <jobname><cyclestr>preprochrrr_&domain;_@H</cyclestr></jobname>
    <join><cyclestr>&OUTDIR;/logfiles_href/preprochrrr_&domain;_@H.log</cyclestr></join>

    <envar>
     <name>NEST</name>
     <value>&domain;</value>
    </envar>

    <envar>
      <name>HOMEhref</name>
      <value>&HOMEhref;</value>
    </envar>
    <envar>
      <name>job</name>
      <value>preprochrrr_&domain;</value>
    </envar>

    <envar>
     <name>MYCOMROOT</name>
     <value>&MYCOMROOT;</value>
    </envar>

    <envar>
      <name>machine</name>
      <value>&machine;</value>
    </envar>

    <envar>
      <name>envir</name>
      <value>&envir;</value>
    </envar>

    <envar>
      <name>KEEPDATA</name>
      <value>&KEEPDATA;</value>
    </envar>
    <envar>
      <name>DATAROOT</name>
      <value>&DATAROOT;</value>
    </envar>
    <envar>
      <name>GESROOT</name>
      <value>&GESROOT;</value>
    </envar>
    <envar>
      <name>USER</name>
      <value>&USER;</value>
    </envar>
    <envar>
      <name>CDATE</name>
      <value><cyclestr>@Y@m@d@H</cyclestr></value>
    </envar>
    <envar>
      <name>PDY</name>
      <value><cyclestr>@Y@m@d</cyclestr></value>
    </envar>
    <envar>
      <name>cyc</name>
      <value><cyclestr>@H</cyclestr></value>
    </envar>

    <envar>
      <name>COMINnam</name>
      <value>&COMINnam;</value>
    </envar>

    <envar>
      <name>COMINhrrr</name>
      <value>&COMINhrrr;</value>
    </envar>

    <envar>
      <name>COMINfv3</name>
      <value>&COMINfv3sarnc;</value>
    </envar>

    <dependency>
    <and>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf00.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf01.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf02.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf03.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf04.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf05.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf06.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf07.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf08.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf09.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf10.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf11.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf12.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf13.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf14.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf15.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf16.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf17.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf18.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf19.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf20.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf21.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf22.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf23.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf24.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf25.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf26.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf27.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf28.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf29.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf30.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf31.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf32.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf33.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf34.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="120000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf35.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf36.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf37.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf38.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf39.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf40.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf41.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf42.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf43.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf44.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf45.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf46.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf47.ak.grib2</cyclestr></datadep>
          <datadep age="05:00" minsize="150000000"><cyclestr>&COMINhrrr;.@Y@m@d/alaska/hrrr.t@Hz.wrfprsf48.ak.grib2</cyclestr></datadep>
    </and>

    </dependency>

  </task>

</workflow>
